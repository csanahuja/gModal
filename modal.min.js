/**
 * Modal
 * A modal library made with raw js
 * 
 * @version 1.0
 * 
 * @author Javier Sanahuja <bannss1@gmail.com>
 * 
 * https://github.com/jsanahuja/modal
 */
var Modal=function(){function h(a){return a.className.split(" ").filter(function(a){return 0<a.length})}function k(a,g){if(0<=h(a).indexOf(g)){var c=h(a);c.splice(c.indexOf(g),1);a.className=c.join(" ")}}var l={title:"Default modal title",body:"This is the default body. It can include <strong>html</strong>. You can also leave it empty so we will hide it :).",buttons:[],close:{closable:!0,location:"in",bindKey:27,callback:function(a){a.hide()}},onShow:function(a){},onHide:function(a){a.destroy()},
onCreate:function(a){},onDestroy:function(a){}};"function"!=typeof Object.assign&&(Object.assign=function(a){if(null==a)throw new TypeError("Cannot convert undefined or null to object");a=Object(a);for(var g=1;g<arguments.length;g++){var c=arguments[g];if(null!=c)for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(a[f]=c[f])}return a});var m=function(a,g){this.id=g||Math.random().toString(36).substr(2);this.options=Object.assign({},l,a);this.options.close=Object.assign({},l.close,a.close);
this.display=!1;this.bindings={};this.bind=function(c,a){"undefined"!==typeof this.bindings[c]&&console.warn("Modal: Tried to bind the key "+c+" twice. Overriding...");this.bindings[c]=a};this.addKeyListener=function(){window.currentModal=this;window.addEventListener("keydown",this.onKeyPress,!1)};this.removeKeyListener=function(){window.currentModal=void 0;window.removeEventListener("keydown",this.onKeyPress,!1)};this.onKeyPress=function(c){if("undefined"!==typeof window.currentModal&&window.currentModal instanceof
m){var a=window.currentModal;if(a.display)for(var b=c.keyCode||c.which,d=Object.keys(a.bindings),e=0;e<d.length;e++)if(d[e]==b)return c.preventDefault(),c.stopPropagation(),a.bindings[d[e]](a),!1}};this.show=function(){if("undefined"!==typeof this.wrapper){var a=this.wrapper;0<=h(a).indexOf("modal-active")||(a.className+=" modal-active");a=document.body;0<=h(a).indexOf("modal-active")||(a.className+=" modal-active");this.display=!0;this.options.onShow(this)}};this.hide=function(){"undefined"!==typeof this.wrapper&&
(k(this.wrapper,"modal-active"),k(document.body,"modal-active"),this.display=!1,this.options.onHide(this))};this.create=function(){if("undefined"===typeof this.wrapper){this.wrapper=document.createElement("div");this.wrapper.className="modal-wrapper";this.wrapper.id="modal-wrapper-"+this.id;var a=document.createElement("div");a.className="modal-backdrop";var f=document.createElement("div");f.className="modal-dialog";if("undefined"!==typeof this.options.close.closable&&this.options.close.closable){var b=
document.createElement("a");b.setAttribute("href","javascript:void(0);");"undefined"===typeof this.options.close.callback&&(this.options.close.callback=function(){});b.modal=this;b.callback=this.options.close.callback;b.onclick=function(a){a.preventDefault();a.stopPropagation();this.callback(this.modal);return!1};"number"===typeof this.options.close.bindKey&&this.bind(this.options.close.bindKey,this.options.close.callback);"undefined"===typeof this.options.close.location||"in"==this.options.close.location?
(b.className="modal-close-in",f.appendChild(b)):(b.className="modal-close-out",a.appendChild(b))}""!=this.options.title&&(b=document.createElement("div"),b.className="modal-title",b.innerHTML=this.options.title,f.appendChild(b));""!=this.options.body&&(b=document.createElement("div"),b.className="modal-body",b.innerHTML=this.options.body,f.appendChild(b));if(0<this.options.buttons.length){b=document.createElement("div");b.className="modal-buttons";for(var d=0;d<this.options.buttons.length;d++){var e=
document.createElement("a");e.setAttribute("href","javascript:void(0);");e.className="modal-button";"undefined"!==typeof this.options.buttons[d].classes&&(e.className+=" "+this.options.buttons[d].classes);"undefined"!==typeof this.options.buttons[d].content&&(e.innerHTML=this.options.buttons[d].content);"undefined"===typeof this.options.buttons[d].callback&&(this.options.buttons[d].callback=function(a){a.hide()});e.modal=this;e.callback=this.options.buttons[d].callback;e.onclick=function(a){a.preventDefault();
a.stopPropagation();this.callback(this.modal);return!1};"undefined"!==typeof this.options.buttons[d].bindKey&&this.bind(this.options.buttons[d].bindKey,this.options.buttons[d].callback);b.appendChild(e)}f.appendChild(b)}this.wrapper.appendChild(a);this.wrapper.appendChild(f);document.body.appendChild(this.wrapper);this.addKeyListener();this.options.onCreate(this)}};this.destroy=function(){"undefined"!==typeof this.wrapper&&(document.body.removeChild(this.wrapper),this.wrapper=void 0,this.removeKeyListener(),
this.options.onDestroy(this))};this.create();return this};return m}();